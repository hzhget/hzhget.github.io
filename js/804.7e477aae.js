(self["webpackChunkshowroom_web"]=self["webpackChunkshowroom_web"]||[]).push([[804],{1804:(e,n,o)=>{"use strict";o.r(n),o.d(n,{default:()=>A});var t=o(3673),l=o(8880),r=o(6785),a=o.n(r);const i=(0,t.HX)("data-v-0636b491");(0,t.dD)("data-v-0636b491");const s={class:"q-pa-md fullscreen"},c={class:"column",padding:""},u=(0,t.Wm)("div",{class:"col-4 q-pa-md justify-center text-center"},[(0,t.Wm)("img",{src:a(),style:{height:"80%",width:"80%"}})],-1),v={class:"col-4 justify-center text-center"},d={class:"text-h4 q-pa-md",style:{color:"grey"}},g={class:"text-h4 q-pa-md",style:{color:"grey"}};(0,t.Cn)();const h=i(((e,n,o,r,a,i)=>((0,t.wg)(),(0,t.j4)("div",s,[(0,t.Wm)("div",c,[u,(0,t.Wm)("div",v,[(0,t.wy)((0,t.Wm)("img",{class:"q-pa-md shadow-2",src:e.qrCodeRef,style:{height:"50%",width:"50%"}},null,8,["src"]),[[l.F8,e.visible]]),(0,t.wy)((0,t.Wm)("div",d,"Scan this QR code to login",512),[[l.F8,e.visible]]),(0,t.wy)((0,t.Wm)("div",g,"the showroom platform.",512),[[l.F8,e.visible]])])])]))));var m=o(1959),p=o(5549),y=o(6417);const f=function(e){return e.length>36?"M":e.length>16?"Q":"H"};var w;(function(e){e[e["IMG"]=0]="IMG",e[e["CANVAS"]=1]="CANVAS",e["STRING"]="IMG"})(w||(w={}));const C=()=>{const e=(0,m.iH)(""),n=(0,m.iH)(""),o=(0,m.iH)(w.IMG),t=(0,m.qj)({errorCorrectionLevel:f(n.value)}),l=(n,o)=>{n&&(console.log(n),y.Z.create({type:"negative",position:"top",message:"Create QrCode Error!"})),o&&(e.value=o)},r=()=>{try{o.value===w.IMG?(0,p.hz)(n.value,t,l):o.value===w.CANVAS?(0,p.rT)(e.value,n.value,t,l):o.value===w.STRING&&(0,p.toString)(n.value,t,l)}catch(r){l(r)}};return{qrCodeRef:e,type:o,text:n,options:t,createQrCode:r}};var I=o(7148),R=function(e,n,o,t){function l(e){return e instanceof o?e:new o((function(n){n(e)}))}return new(o||(o=Promise))((function(o,r){function a(e){try{s(t.next(e))}catch(n){r(n)}}function i(e){try{s(t["throw"](e))}catch(n){r(n)}}function s(e){e.done?o(e.value):l(e.value).then(a,i)}s((t=t.apply(e,n||[])).next())}))};const b=()=>{var e;const n=(0,m.iH)(null),o=(0,m.iH)(""),t=(0,m.iH)(I.in.Information),l=(0,m.iH)(!0),r=(0,m.iH)(5),a=(0,m.iH)({nextRetryDelayInMilliseconds:e=>{const n=e.previousRetryCount,o=e.elapsedMilliseconds;return console.log(e.retryReason),n<3&&o<6e4?1e4*Math.random():null}}),i=()=>(n.value=(new I.su).withUrl(o.value).withAutomaticReconnect(a.value).configureLogging(t.value).build(),n.value),s=()=>R(void 0,void 0,void 0,(function*(){var e,o,t;try{if(null==n.value&&i(),yield null===(e=n.value)||void 0===e?void 0:e.start(),(null===(o=n.value)||void 0===o?void 0:o.state)!==I.AC.Connected)return Error("SignalR Disconnected.");console.log("SignalR Connected.")}catch(l){console.log(l),(null===(t=n.value)||void 0===t?void 0:t.state)===I.AC.Disconnected&&r.value>0&&(r.value--,setTimeout((()=>s),5e3))}}));return l.value&&(null===(e=n.value)||void 0===e||e.onclose((()=>s))),{connection:n,uri:o,isAutoRetry:l,retryTimes:r,logLevel:t,retryDelaysOrReconnectPolicy:a,build:i,start:s}};var k=o(8825),S=o(7013),H=o(7843),q=o(9582);const x=(0,t.aZ)({name:"Login",setup(){var e,n,o;const l=(0,m.iH)(!1),r=(0,k.Z)();r.loading.show({spinner:S.Z,spinnerColor:"orange",message:"加载中,请稍后。。"});const{text:a,createQrCode:i,qrCodeRef:s}=C(),{uri:c,connection:u,start:v}=b();c.value="",v();const d="LOGIN_KEY";return null===(e=u.value)||void 0===e||e.invoke("getSingInResult").then((e=>{r.loading.hide(),l.value=!0,a.value=e.data,i(),r.localStorage.set(d,e.key)})),null===(n=u.value)||void 0===n||n.on("singInBefore",(e=>{r.localStorage.getItem(d)===e.key&&r.loading.show({spinner:S.Z,spinnerColor:"orange",message:"登录中,请稍后。。"})})),null===(o=u.value)||void 0===o||o.on("singIn",(e=>{r.loading.hide(),r.localStorage.getItem(d)===e.key&&r.loading.show({spinner:S.Z,spinnerColor:"orange",message:"登录成功,请稍后。。"}),H.y.refreshToken({accessToken:e.accessToken,refreshToken:e.refreshToken});const{push:n}=(0,q.tv)();n({name:"Index"})})),(0,t.Ah)((()=>{var e;null===(e=u.value)||void 0===e||e.stop()})),{qrCodeRef:s,visible:l}}});x.render=h,x.__scopeId="data-v-0636b491";const A=x},6785:(e,n,o)=>{e.exports=o.p+"img/esquel-group-logo.0fa1a57c.png"}}]);