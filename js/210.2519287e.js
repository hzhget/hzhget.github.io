(self["webpackChunkshowroom_web"]=self["webpackChunkshowroom_web"]||[]).push([[210],{9783:(t,e,n)=>{"use strict";n.d(e,{q:()=>y});var a,o=n(5718),i=n(6681),r=n(556),c=n(589),d=n(677),l=n(1959);(function(t){t["GET_SHOPPING_CART"]="/getShoppingCart",t["CLEAR_SHOPPING_CART"]="/doClearShoppingCart",t["ADD_TO_SHOPPING_CART"]="/addShoppingCart",t["ADD_SHOPPING_CART_QUANTITY"]="/addShoppingCartQuantity",t["DEL_SHOPPING_CART_QUANTITY"]="/delShoppingCartQuantity",t["EDIT_SHOPPING_CART_QUANTITY"]="/editShoppingCartQuantity"})(a||(a={}));const u=function(){const t=[];for(let e=1;e<=10;e++)t.push({productId:"productId".concat(e.toString()),barcode:"barcode".concat(e.toString()),gfNumber:"gfNumber".concat(e.toString()),quantity:e,img:"https://cdn.quasar.dev/img/parallax2.jpg",fabrication:"fabrication".concat(e.toString()),fabricWidth:"fabricWidth".concat(e.toString()),finishing:"finishing".concat(e.toString()),composition:"composition".concat(e.toString()),dyeMethod:"dyeMethod".concat(e.toString()),construction:"construction".concat(e.toString())});return new Promise((e=>{e(t)}))},s=function(){return new Promise((t=>{t(!0)}))},p=function(t){return new Promise((t=>{t(!0)}))},g=function(t){return new Promise((t=>{t(!0)}))};var h=function(t,e,n,a){var o,i=arguments.length,r=i<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,n,a);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(r=(i<3?o(r):i>3?o(e,n,r):o(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r},m=function(t,e,n,a){function o(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,i){function r(t){try{d(a.next(t))}catch(e){i(e)}}function c(t){try{d(a["throw"](t))}catch(e){i(e)}}function d(t){t.done?n(t.value):o(t.value).then(r,c)}d((a=a.apply(t,e||[])).next())}))};const f="shoppingCart";(0,i.i)(f);let S=class extends o.g4{constructor(){super(...arguments),this.shoppingCartState=c.Z.getItem(d.EC)||[]}get getShoppingCartState(){return this.shoppingCartState}get getShoppingCartCountState(){let t=0;return this.shoppingCartState.forEach((e=>t+=e.quantity)),t}commitResetState(){this.shoppingCartState=[]}commitShoppingCartState(t){t.length>0&&(this.shoppingCartState=[]),this.shoppingCartState=t,c.Z.set(d.EC,t)}addToShoppingCart(t){const e=(0,l.IU)(this.shoppingCartState);!t||t instanceof Array||(t=[t]),t.forEach((t=>{const n=e.findIndex((e=>e.productId===t.productId));n>-1?e[n].quantity+=t.quantity:e.push({productId:t.productId,quantity:t.quantity})})),this.commitShoppingCartState(e)}deleteFromShoppingCart(t){const e=(0,l.IU)(this.shoppingCartState);t instanceof Array||(t=[t]),t.forEach((t=>{const n=e.findIndex((e=>e.productId===t.productId));let a=!1;n>-1&&(e[n].quantity-=t.quantity,a=e[n].quantity<1),a&&e.splice(n,1)})),this.commitShoppingCartState(e)}editShoppingCart(t){const e=(0,l.IU)(this.shoppingCartState);t instanceof Array||(t=[t]),t.forEach((t=>{const n=e.findIndex((e=>e.productId===t.productId));let a=!1;n>-1&&(e[n].quantity=t.quantity,a=e[n].quantity<1),a&&e.splice(n,1)})),this.commitShoppingCartState(e)}clearShoppingCart(){return m(this,void 0,void 0,(function*(){return s().then((()=>(this.commitShoppingCartState([]),!0))).catch((()=>!1))}))}loadShoppingCart(){return m(this,void 0,void 0,(function*(){return u().then((t=>{const e=[];return t.forEach((t=>{e.push({productId:t.productId,quantity:t.quantity})})),this.commitShoppingCartState(e),t})).catch((()=>[]))}))}addShoppingCartQuantity(t){return m(this,void 0,void 0,(function*(){return p({productId:t,action:"add"}).then((()=>(this.addToShoppingCart(t.map((t=>({productId:t,quantity:1})))),!0))).catch((()=>!1))}))}delShoppingCartQuantity(t){return m(this,void 0,void 0,(function*(){return p({productId:t,action:"del"}).then((()=>(this.deleteFromShoppingCart(t.map((t=>({productId:t,quantity:1})))),!0))).catch((()=>!1))}))}editShoppingCartQuantity(t){return m(this,void 0,void 0,(function*(){return g(t).then((()=>(this.editShoppingCart(t),!0))).catch((()=>!1))}))}};h([o.mm],S.prototype,"commitResetState",null),h([o.mm],S.prototype,"commitShoppingCartState",null),h([o.aU],S.prototype,"addToShoppingCart",null),h([o.aU],S.prototype,"deleteFromShoppingCart",null),h([o.aU],S.prototype,"editShoppingCart",null),h([o.aU],S.prototype,"clearShoppingCart",null),h([o.aU],S.prototype,"loadShoppingCart",null),h([o.aU],S.prototype,"addShoppingCartQuantity",null),h([o.aU],S.prototype,"delShoppingCartQuantity",null),h([o.aU],S.prototype,"editShoppingCartQuantity",null),S=h([(0,o.Yl)({namespaced:!0,name:f,dynamic:!0,store:r.default})],S);const y=(0,o.rT)(S)},5388:(t,e,n)=>{"use strict";n.d(e,{Z:()=>h});var a=n(3673),o=n(8880);const i={key:0,class:"row"},r={class:"col-4 q-py-md"},c={class:"col-1 q-pl-xs",style:{width:"50px"}};function d(t,e,n,d,l,u){const s=(0,a.up)("q-pagination"),p=(0,a.up)("q-select");return t.item.pageNumber>0?((0,a.wg)(),(0,a.j4)("div",i,[(0,a.Wm)("div",r,[(0,a.Wm)(s,{modelValue:t.item.page,"onUpdate:modelValue":[e[1]||(e[1]=e=>t.item.page=e),t.changePagination],max:t.item.pageNumber,"max-pages":5,"direction-links":""},null,8,["modelValue","max","onUpdate:modelValue"])]),(0,a.wy)((0,a.Wm)("div",c,[(0,a.Wm)(p,{dense:"",borderless:"",options:t.options,modelValue:t.item.pageSize,"onUpdate:modelValue":[e[2]||(e[2]=e=>t.item.pageSize=e),t.changeSelect]},null,8,["options","modelValue","onUpdate:modelValue"])],512),[[o.F8,t.showSelect]])])):(0,a.ry)("",!0)}const l=(0,a.aZ)({name:"Pagination",props:{item:{type:Object,default(){return{page:1,pageSize:10,pageNumber:0}}},showSelect:{type:Boolean,default:!1},options:{type:Array,default(){return[10,20,50,300]}}},setup(t,{emit:e}){const{item:n}=t,o=t=>{n.pageSize=t,e("change",n)},i=t=>{n.page=t,e("change",n)};return(0,a.bv)((()=>e("change",n))),{changeSelect:o,changePagination:i}}});var u=n(7300),s=n(7208),p=n(7518),g=n.n(p);l.render=d;const h=l;g()(l,"components",{QPagination:u.Z,QSelect:s.Z})},4210:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>pt});var a=n(3673),o=n(8880),i=n(2323),r=n(9076),c=n.n(r);const d=(0,a.HX)("data-v-aa6d2bc8");(0,a.dD)("data-v-aa6d2bc8");const l={class:"row q-pa-xs",style:{"text-align":"center","justify-content":"center"}},u={key:0,src:c(),style:{width:"100%",height:"100%"}},s={key:1,"webkit-playsinline":"true",playsinline:"true",ref:"scannerRef",style:{width:"100%",height:"100%"}},p=(0,a.Wm)("div",{class:"row q-pa-md",style:{"text-align":"center","justify-content":"center"}},[(0,a.Wm)("div",{class:"col-md-12 q-pa-md"},[(0,a.Wm)("div",{class:"text-h5"},"Start browsing your items"),(0,a.Wm)("div",{class:"text-grey"},"Use the scanner to read item's"),(0,a.Wm)("div",{class:"text-grey"},"barcode and then its detail"),(0,a.Wm)("div",{class:"text-grey"},"will be displayed in the listing.")])],-1),g={class:"row q-pa-md",style:{"text-align":"center","justify-content":"center"}},h={class:"col-md-12 q-py-md",style:{width:"100%"}},m={class:"row q-pa-md title-height"},f=(0,a.Wm)("div",{class:"col"},[(0,a.Wm)("div",{class:"text-h4",style:{color:"#e34d4d"}},"SCAN AREA")],-1),S={class:"col"},y=(0,a.Uk)("Empty Scan Area"),C=(0,a.Uk)("Add To Shopping Cart"),v=(0,a.Uk)("Scan"),w={class:"text-h6"};(0,a.Cn)();const b=d(((t,e,n,r,c,b)=>{const I=(0,a.up)("q-page-container"),_=(0,a.up)("q-btn"),q=(0,a.up)("q-drawer"),W=(0,a.up)("q-tooltip"),A=(0,a.up)("q-btn-group"),P=(0,a.up)("q-separator"),x=(0,a.up)("q-checkbox"),k=(0,a.up)("q-item-section"),Q=(0,a.up)("q-item-label"),N=(0,a.up)("q-input"),D=(0,a.up)("q-item"),R=(0,a.up)("q-list"),T=(0,a.up)("q-scroll-area"),Z=(0,a.up)("Pagination");return(0,a.wg)(),(0,a.j4)(a.HY,null,[(0,a.Wm)(q,{side:"right",modelValue:t.drawerRight,"onUpdate:modelValue":e[1]||(e[1]=e=>t.drawerRight=e),bordered:"",width:250,breakpoint:500,"content-class":"bg-grey-3"},{default:d((()=>[(0,a.Wm)(I,{style:{"padding-top":"50%"}}),(0,a.Wm)("div",l,[t.scanFlag?((0,a.wg)(),(0,a.j4)("video",s,null,512)):((0,a.wg)(),(0,a.j4)("img",u))]),p,(0,a.Wm)("div",g,[(0,a.Wm)("div",h,[(0,a.Wm)(_,{class:"float-left",style:{background:"#FF0080",color:"white"},label:"Start",size:"md",onClick:t.handleScan},null,8,["onClick"]),(0,a.Wm)(_,{class:"float-right text-grey-8",label:"Stop",size:"md",onClick:t.handleStop},null,8,["onClick"])])])])),_:1},8,["modelValue"]),(0,a.Wm)(I,{class:"container-width"},{default:d((()=>[(0,a.Wm)("div",m,[f,(0,a.Wm)("div",S,[(0,a.Wm)(A,{class:"float-right",outline:""},{default:d((()=>[(0,a.wy)((0,a.Wm)(_,{outline:"",flat:"",style:{color:"red"},icon:"fas fa-trash-alt",onClick:t.handleClearScanArea},{default:d((()=>[(0,a.Wm)(W,null,{default:d((()=>[y])),_:1})])),_:1},8,["onClick"]),[[o.F8,!1]]),(0,a.Wm)(_,{outline:"",flat:"",style:{color:"#FF0080"},icon:"fas fa-cart-plus",onClick:t.handleAddToCart},{default:d((()=>[(0,a.Wm)(W,null,{default:d((()=>[C])),_:1})])),_:1},8,["onClick"]),(0,a.wy)((0,a.Wm)(_,{outline:"",flat:"",icon:"fas fa-barcode",onClick:t.handleSwitch},{default:d((()=>[(0,a.Wm)(W,null,{default:d((()=>[v])),_:1})])),_:1},8,["onClick"]),[[o.F8,!1]])])),_:1})])]),(0,a.Wm)(P,{spaced:""}),(0,a.Wm)(T,{class:"full-width row list-height"},{default:d((()=>[((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(t.info,(e=>((0,a.wg)(),(0,a.j4)(R,{key:e},{default:d((()=>[(0,a.Wm)(D,null,{default:d((()=>[(0,a.Wm)(k,{top:"",side:""},{default:d((()=>[(0,a.Wm)(x,{modelValue:e.isChecked,"onUpdate:modelValue":t=>e.isChecked=t,value:"true"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,a.Wm)(k,{thumbnail:"",top:""},{default:d((()=>[(0,a.Wm)("img",{src:e.img},null,8,["src"])])),_:2},1024),(0,a.Wm)(k,{top:""},{default:d((()=>[(0,a.Wm)(Q,{lines:"1"},{default:d((()=>[(0,a.Wm)("span",w,(0,i.zw)(e.gfNumber),1)])),_:2},1024),(0,a.Wm)(Q,{caption:"",lines:"1"},{default:d((()=>[(0,a.Uk)((0,i.zw)(e.fabrication)+"|"+(0,i.zw)(e.fabricWidth)+"|"+(0,i.zw)(e.finishing)+"|"+(0,i.zw)(e.composition)+"|"+(0,i.zw)(e.dyeMethod)+"|"+(0,i.zw)(e.construction),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(k,{top:"",side:""},{default:d((()=>[(0,a.Wm)(N,{borderless:"","input-style":{width:"50px","text-align":"center"},"item-aligned":"",modelValue:e.quantity,"onUpdate:modelValue":t=>e.quantity=t,type:"number",min:"1"},{before:d((()=>[(0,a.Wm)(_,{class:"text-grey-8",flat:"",icon:"add",onClick:n=>t.handleAddQuantity(e)},null,8,["onClick"])])),after:d((()=>[(0,a.Wm)(_,{class:"text-grey-8",flat:"",icon:"remove",onClick:n=>t.handleDelQuantity(e)},null,8,["onClick"])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,a.Wm)(k,{top:"",side:""},{default:d((()=>[(0,a.Wm)(_,{class:"text-grey-8 gt-xs",size:"20px",flat:"",round:"",icon:"delete",onClick:n=>t.handleDelShoppingCart(e)},null,8,["onClick"])])),_:2},1024)])),_:2},1024),(0,a.Wm)(P,{spaced:"",inset:""})])),_:2},1024)))),128))])),_:1}),(0,a.Wm)(Z,{onChange:t.getShoppingCartScanInfo,item:t.paginationItem},null,8,["onChange","item"])])),_:1})],64)}));var I=n(1959),_=n(3450),q=n(6417);n(499);function W(t,e,n,o,i,r){const c=(0,a.up)("q-space"),d=(0,a.up)("q-icon"),l=(0,a.up)("q-card-section"),u=(0,a.up)("q-card"),s=(0,a.up)("q-dialog"),p=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(s,{ref:"dialogRef",onHide:t.onDialogHide,onShow:t.onDialogShow,persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(l,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c),(0,a.wy)((0,a.Wm)(d,{icon:"close",flat:"",round:"",dense:"",onClick:t.handleClose},null,8,["onClick"]),[[p]])])),_:1})])),_:1})])),_:1},8,["onHide","onShow"])}var A=n(1701);const P=(0,a.aZ)({props:{id:{required:!0,type:String},afterShow:Function,beforeHide:Function,handleClose:Function},emits:[...A.Z.emits],setup(t){const{dialogRef:e}=(0,A.Z)(),n=()=>{t.afterShow&&t.afterShow()},a=()=>{t.beforeHide&&t.beforeHide()};return{dialogRef:e,onDialogShow:n,onDialogHide:a}}});var x=n(6778),k=n(151),Q=n(5589),N=n(2025),D=n(4554),R=n(2883),T=n(7518),Z=n.n(T);P.render=W;Z()(P,"components",{QDialog:x.Z,QCard:k.Z,QCardSection:Q.Z,QSpace:N.Z,QIcon:D.Z}),Z()(P,"directives",{ClosePopup:R.Z});var U=function(t,e,n,a){function o(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,i){function r(t){try{d(a.next(t))}catch(e){i(e)}}function c(t){try{d(a["throw"](t))}catch(e){i(e)}}function d(t){t.done?n(t.value):o(t.value).then(r,c)}d((a=a.apply(t,e||[])).next())}))};const H=()=>{const t=new Map,e=new _.BrowserMultiFormatReader(t),n=(0,I.iH)(navigator&&navigator.mediaDevices&&"enumerateDevices"in navigator.mediaDevices);return{codeReader:e,isMediaStreamAPISupported:n}},z=t=>U(void 0,void 0,void 0,(function*(){const e=(0,I.iH)([]);return yield t.listVideoInputDevices().then((t=>{e.value=t})).catch((()=>{q.Z.create({type:"negative",message:"没有找到摄像头设备!"})})),{videoDevices:e}})),E=t=>{const e=new Audio("/scan.mp3"),n=(0,I.iH)("video"),a=(0,I.iH)(""),o=(0,I.iH)(""),i="_showroom",r=()=>t.decodeFromVideoDevice(o.value,n.value,((t,n)=>U(void 0,void 0,void 0,(function*(){if(t&&(a.value=t.getText().concat(i,Date.now().toString()),yield e.play()),n&&!(n instanceof _.NotFoundException))throw n}))));return{barcode:a,scannerRef:n,deviceID:o,delimiter:i,scan:r}};var V,O=n(8825);(function(t){t["GET_SCAN_SHOPPING_CART"]="/getScanShoppingCartList",t["CLEAR_SHOPPING_CART"]="/doClearShoppingCart",t["ADD_TO_SCAN_SHOPPING_CART"]="/addShoppingCart",t["ADD_OR_DEL_SCAN_SHOPPING_CART_QUANTITY"]="/addOrDelShoppingCartQuantity",t["CLEAR_SCAN_AREA"]="/doClearScanArea",t["GET_SHOPPING_ITEM_BY_BARCODE"]="/getShoppingItemByBarcode"})(V||(V={}));const j=[];for(let gt=1;gt<=1e3;gt++)j.push({storageId:"storageId".concat(gt.toString()),productId:"productId".concat(gt.toString()),barcode:"barcode".concat(gt.toString()),gfNumber:"gfNumber".concat(gt.toString()),quantity:gt,img:"https://cdn.quasar.dev/img/parallax2.jpg",fabrication:"fabrication".concat(gt.toString()),fabricWidth:"fabricWidth".concat(gt.toString()),finishing:"finishing".concat(gt.toString()),composition:"composition".concat(gt.toString()),dyeMethod:"dyeMethod".concat(gt.toString()),construction:"construction".concat(gt.toString()),isChecked:!1});const F=function(t){const e=j.slice((t.page-1)*t.pageSize,t.pageSize*t.page);return new Promise((n=>{n({total:j.length,page:t.page,pageSize:t.pageSize,data:e})}))},M=function(t){for(let e=0;e<t.length;e++)j.push({storageId:"storageId".concat(Math.random().toString()),productId:t[e].productId,barcode:"barcode",gfNumber:"gfNumber",quantity:t[e].quantity,img:"https://cdn.quasar.dev/img/parallax2.jpg",fabrication:"fabrication",fabricWidth:"fabricWidth",finishing:"finishing",composition:"composition",dyeMethod:"dyeMethod",construction:"construction",isChecked:!1});return new Promise((t=>{t(!0)}))},G=function(t){return new Promise((t=>{t(!0)}))},Y=function(){return j.splice(0,j.length),new Promise((t=>{t(!0)}))},B=function(t){return new Promise((t=>{j.push({storageId:"storageId_scan",productId:"productId_scan",barcode:"barcode",gfNumber:"gfNumber",quantity:1,img:"https://cdn.quasar.dev/img/parallax2.jpg",fabrication:"fabrication",fabricWidth:"fabricWidth",finishing:"finishing",composition:"composition",dyeMethod:"dyeMethod",construction:"construction",isChecked:!1}),t(!0)}))};var L=n(5388),K=n(9783),X=function(t,e,n,a){function o(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,i){function r(t){try{d(a.next(t))}catch(e){i(e)}}function c(t){try{d(a["throw"](t))}catch(e){i(e)}}function d(t){t.done?n(t.value):o(t.value).then(r,c)}d((a=a.apply(t,e||[])).next())}))};const J=(0,a.aZ)({components:{Pagination:L.Z},setup(){const t=(0,I.iH)(!0),e=(0,I.iH)(!1),n=(0,I.iH)([]),o=(0,I.qj)({page:1,pageSize:10,pageNumber:0}),i=()=>{F(o).then((t=>{n.value=t.data;const e=t.total/t.pageSize;o.pageNumber=t.total%t.pageSize===0?e:Math.floor(e)+1,o.page=t.page,o.pageSize=t.pageSize}))},{notify:r}=(0,O.Z)(),{codeReader:c,isMediaStreamAPISupported:d}=H(),{barcode:l,scannerRef:u,deviceID:s,scan:p,delimiter:g}=E(c),h=()=>X(this,void 0,void 0,(function*(){if(e.value=!0,!d.value)return r({type:"negative",message:"你的设备不支持扫描操作，请更换设备后重试!"}),void(e.value=!1);const{videoDevices:t}=yield z(c);t.value&&t.value.length>0&&(s.value=t.value[0].deviceId),p().catch((t=>{c.reset(),e.value=!1,q.Z.create({type:"negative",message:"扫描出错!"})}))}));(0,a.YP)(l,(t=>{B({barcode:t.split(g)[0]}).then((t=>i()))})),(0,a.Ah)((()=>{c.reset()}));const m=()=>{c.reset(),t.value=!t.value,e.value=!1},f=()=>{c.reset(),e.value=!1},S=t=>{const e=[];return t.forEach((t=>{e.push({productId:t.productId,quantity:t.quantity})})),e},y=t=>{const e=(0,I.SU)(t);e.quantity++,M(S([e])).then((()=>{t.quantity++}))},C=t=>{const e=(0,I.SU)(t);e.quantity--,M(S([e])).then((()=>{t.quantity--}))},v=t=>{const e=(0,I.SU)(t);e.quantity=0,M(S([e])).then((()=>{const e=n.value.findIndex((e=>e.productId===t.productId));e>-1&&n.value.splice(e,1)}))},w=()=>{const t=n.value.filter((t=>t.isChecked)).map((t=>t.storageId));G({storageId:t}).then((()=>K.q.loadShoppingCart()))},b=()=>{Y().then((()=>{n.value=[],o.pageNumber=0}))};return{info:n,paginationItem:o,scanFlag:e,drawerRight:t,scannerRef:u,handleAddQuantity:y,handleDelQuantity:C,handleDelShoppingCart:v,handleSwitch:m,handleScan:h,handleStop:f,getShoppingCartScanInfo:i,handleClearScanArea:b,handleAddToCart:w}}});var $=n(2901),tt=n(2652),et=n(8240),nt=n(6375),at=n(8870),ot=n(5869),it=n(7704),rt=n(7011),ct=n(6332),dt=n(2035),lt=n(5735),ut=n(2350),st=n(4842);J.render=b,J.__scopeId="data-v-aa6d2bc8";const pt=J;Z()(J,"components",{QDrawer:$.Z,QPageContainer:tt.Z,QBtn:et.Z,QBtnGroup:nt.Z,QTooltip:at.Z,QSeparator:ot.Z,QScrollArea:it.Z,QList:rt.Z,QItem:ct.Z,QItemSection:dt.Z,QCheckbox:lt.Z,QItemLabel:ut.Z,QInput:st.Z})},9076:(t,e,n)=>{t.exports=n.p+"img/scanner-01.810fddf3.png"}}]);